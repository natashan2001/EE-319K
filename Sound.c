// Sound.c
// Runs on any computer
// Sound assets based off the original Space Invaders 
// Import these constants into your SpaceInvaders.c for sounds!
// Jonathan Valvano
// 1/17/2020
#include <stdint.h>
#include "Sound.h"
#include "DAC.h"
#include "Timer0.h"
#include "../inc/tm4c123gh6pm.h"
const uint8_t shoot[230] = {
  129, 99, 103, 164, 214, 129, 31, 105, 204, 118, 55, 92, 140, 225, 152, 61, 84, 154, 184, 101, 
  75, 129, 209, 135, 47, 94, 125, 207, 166, 72, 79, 135, 195, 118, 68, 122, 205, 136, 64, 106, 
  143, 173, 105, 54, 122, 200, 133, 74, 106, 215, 236, 91, 43, 84, 163, 115, 34, 81, 150, 209, 
  184, 198, 191, 113, 95, 12, 0, 79, 167, 111, 120, 238, 255, 255, 118, 255, 255, 255, 255, 255, 
  89, 236, 255, 255, 255, 255, 190, 0, 0, 0, 20, 170, 161, 137, 255, 255, 255, 181, 37, 0, 
 0, 15, 0, 60, 167, 255, 255, 255, 255, 255, 60, 0, 0, 41, 60, 44, 128, 211, 255, 255, 
 255, 150, 51, 12, 0, 0, 10, 136, 201, 208, 236, 255, 255, 209, 0, 0, 0, 15, 16, 31, 
  128, 255, 255, 255, 255, 252, 144, 0, 0, 0, 77, 68, 75, 171, 255, 255, 255, 233, 139, 53, 
  0, 0, 9, 106, 77, 123, 209, 255, 255, 255, 146, 68, 7, 0, 0, 0, 136, 166, 159, 219, 
  255, 255, 255, 82, 0, 0, 0, 0, 0, 81, 214, 225, 229, 255, 255, 255, 115, 0, 0, 0, 
  75, 63, 47, 126, 209, 255, 255, 255, 222, 119, 54, 0, 0, 0, 112, 133, 103, 185, 255, 255, 
  255, 222, 136, 74, 0, 0, 0, 102, 96, 98};
const uint8_t end[25] =
{
	175, 230, 123, 100, 95, 82, 73, 65, 43, 34, 23, 10, 0, 10, 23, 35, 47, 58, 69, 75, 89, 105, 130, 160, 175
};

const uint8_t explosion[300] = {
  120, 119, 119, 119, 120, 120, 129, 130, 133, 129, 125, 119, 119, 119, 125, 128, 135, 137, 133, 123, 
  109, 99, 91, 92, 101, 116, 135, 140, 143, 130, 123, 105, 96, 89, 92, 105, 115, 116, 120, 119, 
  130, 133, 139, 149, 163, 171, 174, 173, 161, 143, 133, 115, 99, 79, 72, 75, 79, 82, 87, 103, 
  125, 143, 139, 137, 137, 149, 163, 173, 168, 153, 133, 111, 105, 106, 109, 119, 137, 149, 140, 133, 
  133, 143, 154, 168, 183, 187, 188, 184, 173, 163, 143, 113, 75, 39, 5, 0, 0, 3, 9, 19, 
  46, 82, 105, 120, 135, 139, 144, 173, 195, 208, 211, 202, 191, 181, 181, 202, 236, 255, 255, 255, 
  255, 255, 240, 212, 192, 171, 130, 85, 47, 36, 41, 37, 33, 43, 57, 51, 33, 3, 0, 0, 
  0, 0, 5, 9, 24, 67, 120, 157, 177, 201, 222, 239, 250, 246, 236, 216, 192, 159, 101, 41, 
  0, 0, 0, 0, 0, 0, 58, 103, 129, 161, 192, 218, 239, 242, 221, 184, 163, 157, 157, 159, 
  163, 161, 129, 81, 37, 17, 7, 19, 41, 61, 89, 139, 178, 195, 205, 202, 184, 161, 153, 157, 
  161, 181, 187, 177, 164, 149, 161, 197, 246, 255, 255, 255, 255, 255, 252, 226, 173, 105, 39, 0, 
  0, 0, 19, 71, 101, 133, 168, 183, 174, 163, 139, 113, 99, 77, 47, 31, 36, 41, 39, 43, 
  77, 125, 154, 149, 128, 95, 65, 57, 79, 99, 130, 161, 173, 192, 221, 246, 255, 235, 181, 115, 
  48, 0, 0, 0, 19, 58, 115, 171, 216, 216, 177, 119, 67, 43, 39, 31, 24, 17, 12, 15, 
  27, 79, 149, 226, 255, 255, 255, 255, 255, 255, 255, 240, 207, 157, 77, 3, 0, 0, 0, 0};

const uint8_t fastinvader1[300] = {
  122, 105, 88, 60, 43, 20, 15, 9, 20, 31, 48, 65, 94, 105, 128, 144, 167, 184, 195, 218, 
  224, 235, 240, 246, 252, 255, 252, 252, 252, 246, 246, 240, 235, 224, 218, 207, 201, 195, 184, 178, 
  167, 161, 144, 139, 133, 122, 116, 105, 99, 88, 82, 71, 65, 54, 60, 65, 65, 77, 82, 94, 
  94, 88, 94, 82, 71, 60, 48, 37, 26, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 15, 26, 31, 48, 60, 71, 77, 94, 
  111, 122, 128, 139, 150, 167, 178, 190, 201, 207, 218, 224, 235, 240, 255, 255, 255, 255, 255, 255, 
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 246, 235, 235, 229, 224, 212, 212, 201, 195, 195, 
  184, 178, 167, 161, 156, 150, 150, 139, 133, 128, 122, 116, 111, 105, 99, 94, 94, 82, 82, 77, 
  77, 65, 65, 60, 43, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 26, 
  43, 60, 77, 82, 99, 105, 116, 116, 128, 128, 128, 128, 128, 128, 122, 116, 111, 105, 99, 105, 
  94, 88, 82, 77, 65, 60, 48, 43, 37, 31, 26, 20, 15, 9, 3, 3, 0, 0, 0, 3, 
  9, 26, 37, 48, 48, 48, 48, 43, 37, 26, 15, 9, 0, 0, 0, 0, 0, 0, 0, 0, 
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 15, 26, 37, 48, 60, 71, 88, 105, 
  116, 128, 139, 150, 167, 178, 195, 207, 218, 235, 246, 255, 255, 255, 255, 255, 255, 255, 255, 255};
 uint32_t Length;
 const uint8_t *SoundPt;
	void SoundTask (void)
	{
		if(Length)
		{
			DAC_Out(*SoundPt%127);
			SoundPt++;
			Length--;
		}
		else
		{
			NVIC_DIS0_R= 1<<19;
		}
	}
void Sound_Init(void){
	Length=0;
	DAC_Init();
	Timer0_Init(&SoundTask,80000000/1100);
};

void Sound_Play(const uint8_t *pt, uint32_t count){
	Length=count;
	SoundPt= pt;
	NVIC_EN0_R = 1<<19;
};
void Sound_Shoot(void){
	Sound_Play(shoot,2000);
};
void Sound_End(void){
	Sound_Play(end,6000);
};
void Sound_Killed(void){
	Sound_Play(explosion,1000);
};

void Sound_Fastinvader1(void){
	Sound_Play(fastinvader1,1000);
};
